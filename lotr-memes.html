<!DOCTYPE html>
<html>

<head>
    <title>Today's LOTR Meme</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LOTR Memes</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="assets/favicon.png" type="image/png">
    <link rel="stylesheet" type="text/css" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300&family=Roboto+Mono:wght@300&display=swap"
        rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ua-parser-js/dist/ua-parser.min.js"></script>



    <script type="text/javascript">
        (function (c, l, a, r, i, t, y) {
            c[a] = c[a] || function () { (c[a].q = c[a].q || []).push(arguments) };
            t = l.createElement(r); t.async = 1; t.src = "https://www.clarity.ms/tag/" + i;
            y = l.getElementsByTagName(r)[0]; y.parentNode.insertBefore(t, y);
        })(window, document, "clarity", "script", "ly8bu4nldl");
    </script>

</head>


<body>

    <header>
        <!-- header content -->
    </header>

    <main>
        <!-- page content -->

        <body>

            </div>

            <div class="percentage_container">
                <p class="percentage" id="percentage">year percentage loading...</p>
                <script>
                    function updateContent() {
                        const today = new Date();
                        const formattedDate = `${today.getFullYear()}-${today.getMonth() + 1}-${today.getDate()}`;

                        // Update page title
                        document.title = `LOTR Meme | ${formattedDate}`;

                        // Update meme image
                        const imageUrl = `https://findirfin.dev/lotr-memes/images/${formattedDate}.png`;
                        document.querySelector(".meme").src = imageUrl;
                        document.querySelector(".meme").alt = `Lord of the Rings meme for ${formattedDate}`;

                        // Update year percentage
                        const millisecondsInYear = new Date(today.getFullYear() + 1, 0, 1) - new Date(today.getFullYear(), 0, 1);
                        const millisecondsElapsed = today - new Date(today.getFullYear(), 0, 1);
                        const percentage = (millisecondsElapsed / millisecondsInYear) * 100;
                        document.getElementById("percentage").textContent = `${percentage.toFixed(2)}% of the year has passed.`;
                    }

                    // Call the function when the page loads
                    document.addEventListener('DOMContentLoaded', updateContent);
                </script>
            </div>



            <div>
                <img class="meme" src="" alt="lord of the rings meme for today">
            </div>
            <script> // Get the current date, insert image and replace title
                // Get the current date.
                var date = new Date();

                // Get the date in the format "YYYY-MM-DD".
                var formattedDate = date.getFullYear() + "-" + (date.getMonth() + 1) + "-" + date.getDate();
                // Set the page title to the formatted date.
                document.title = "LOTR Meme | " + formattedDate;
                // Get the image URL.
                var imageUrl = "https://findirfin.dev/lotr-memes/images/" + formattedDate + ".png";

                // Create an image element.
                var image = document.createElement("img");


                // Set the image's src attribute to the image URL.
                image.src = imageUrl;
                console.log(image);

                // Replace the existing image with the new image.
                document.querySelector(".meme").src = imageUrl;



            </script>
            <div class="caption">
                I do not own any of these images, they are sourced from all over the information super highway.
            </div>
            <div class="donation-space">
                <!--  <div class='onesignal-customlink-container'></div>   -->

                <!-- <p>
                <script src="https://liberapay.com/findirfin/widgets/button.js"></script>
                <noscript><a href="https://liberapay.com/findirfin/donate"><img alt="Donate using Liberapay"
                            src="https://liberapay.com/assets/widgets/donate.svg"></a></noscript>
            </p>-->
            </div>

            <!--
            <a href="https://matrix.to/#/#memeshq-findirfin:matrix.org"> 
                <button type="button" class="matrix_link">Join the Conversation on Matrix</button>
            </a>
            -->
            <button type="button" class="collapsible">Comments</button>
            <div class="content">

                <div class="comments">
                    <p class="disclaimer">
                        Comments are reset for every meme. Check <a
                            href="https://github.com/findirfin/findirfin.dev-interactions/issues">github</a> for
                        previous
                        comments.
                    </p>
                    <script src="https://utteranc.es/client.js" repo="findirfin/findirfin.dev-interactions"
                        issue-term="title" label="ðŸ’¬interaction" theme="dark-blue" crossorigin="anonymous" async>
                        </script>
                </div>
            </div>
            <div class="upload">
                <a href="https://forms.gle/mdJVKnBrcrFN3Cm37">
                    <p>Submit a Meme</p>
                </a>
            </div>
            <script>
                var coll = document.getElementsByClassName("collapsible");
                var i;

                for (i = 0; i < coll.length; i++) {
                    coll[i].addEventListener("click", function () {
                        this.classList.toggle("active");
                        var content = this.nextElementSibling;
                        if (content.style.display === "block") {
                            content.style.display = "none";
                        } else {
                            content.style.display = "block";
                        }
                    });
                }
            </script>

    </main>

    <footer>
        <p><a href="https://findirfin.dev/privacy">Privacy</a>
    </footer>

</body>

</html>